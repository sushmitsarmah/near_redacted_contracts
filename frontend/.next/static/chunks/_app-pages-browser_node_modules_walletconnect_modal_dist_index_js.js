"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_walletconnect_modal_dist_index_js"],{

/***/ "(app-pages-browser)/./node_modules/@walletconnect/modal-core/dist/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@walletconnect/modal-core/dist/index.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigCtrl: function() { return /* binding */ ConfigCtrl; },\n/* harmony export */   CoreUtil: function() { return /* binding */ CoreUtil; },\n/* harmony export */   EventsCtrl: function() { return /* binding */ EventsCtrl; },\n/* harmony export */   ExplorerCtrl: function() { return /* binding */ ExplorerCtrl; },\n/* harmony export */   ModalCtrl: function() { return /* binding */ ModalCtrl; },\n/* harmony export */   OptionsCtrl: function() { return /* binding */ OptionsCtrl; },\n/* harmony export */   RouterCtrl: function() { return /* binding */ RouterCtrl; },\n/* harmony export */   ThemeCtrl: function() { return /* binding */ ThemeCtrl; },\n/* harmony export */   ToastCtrl: function() { return /* binding */ ToastCtrl; }\n/* harmony export */ });\n/* harmony import */ var valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! valtio/vanilla */ \"(app-pages-browser)/./node_modules/valtio/esm/vanilla.mjs\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"(app-pages-browser)/./node_modules/buffer/index.js\")[\"Buffer\"];\n\n\nconst state$7 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  history: [\"ConnectWallet\"],\n  view: \"ConnectWallet\",\n  data: void 0\n});\nconst RouterCtrl = {\n  state: state$7,\n  subscribe(callback) {\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.subscribe)(state$7, () => callback(state$7));\n  },\n  push(view, data) {\n    if (view !== state$7.view) {\n      state$7.view = view;\n      if (data) {\n        state$7.data = data;\n      }\n      state$7.history.push(view);\n    }\n  },\n  reset(view) {\n    state$7.view = view;\n    state$7.history = [view];\n  },\n  replace(view) {\n    if (state$7.history.length > 1) {\n      state$7.history[state$7.history.length - 1] = view;\n      state$7.view = view;\n    }\n  },\n  goBack() {\n    if (state$7.history.length > 1) {\n      state$7.history.pop();\n      const [last] = state$7.history.slice(-1);\n      state$7.view = last;\n    }\n  },\n  setData(data) {\n    state$7.data = data;\n  }\n};\n\nconst CoreUtil = {\n  WALLETCONNECT_DEEPLINK_CHOICE: \"WALLETCONNECT_DEEPLINK_CHOICE\",\n  WCM_VERSION: \"WCM_VERSION\",\n  RECOMMENDED_WALLET_AMOUNT: 9,\n  isMobile() {\n    if (typeof window !== \"undefined\") {\n      return Boolean(\n        window.matchMedia(\"(pointer:coarse)\").matches || /Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)\n      );\n    }\n    return false;\n  },\n  isAndroid() {\n    return CoreUtil.isMobile() && navigator.userAgent.toLowerCase().includes(\"android\");\n  },\n  isIos() {\n    const ua = navigator.userAgent.toLowerCase();\n    return CoreUtil.isMobile() && (ua.includes(\"iphone\") || ua.includes(\"ipad\"));\n  },\n  isHttpUrl(url) {\n    return url.startsWith(\"http://\") || url.startsWith(\"https://\");\n  },\n  isArray(data) {\n    return Array.isArray(data) && data.length > 0;\n  },\n  isTelegram() {\n    return typeof window !== \"undefined\" && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (Boolean(window.TelegramWebviewProxy) || // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.Telegram) || // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Boolean(window.TelegramWebviewProxyProto));\n  },\n  formatNativeUrl(appUrl, wcUri, name) {\n    if (CoreUtil.isHttpUrl(appUrl)) {\n      return this.formatUniversalUrl(appUrl, wcUri, name);\n    }\n    let safeAppUrl = appUrl;\n    if (!safeAppUrl.includes(\"://\")) {\n      safeAppUrl = appUrl.replaceAll(\"/\", \"\").replaceAll(\":\", \"\");\n      safeAppUrl = `${safeAppUrl}://`;\n    }\n    if (!safeAppUrl.endsWith(\"/\")) {\n      safeAppUrl = `${safeAppUrl}/`;\n    }\n    this.setWalletConnectDeepLink(safeAppUrl, name);\n    const encodedWcUrl = encodeURIComponent(wcUri);\n    return `${safeAppUrl}wc?uri=${encodedWcUrl}`;\n  },\n  formatUniversalUrl(appUrl, wcUri, name) {\n    if (!CoreUtil.isHttpUrl(appUrl)) {\n      return this.formatNativeUrl(appUrl, wcUri, name);\n    }\n    let safeAppUrl = appUrl;\n    if (safeAppUrl.startsWith(\"https://t.me\")) {\n      const formattedUri = Buffer.from(wcUri).toString(\"base64\").replace(/[=]/g, \"\");\n      if (safeAppUrl.endsWith(\"/\")) {\n        safeAppUrl = safeAppUrl.slice(0, -1);\n      }\n      this.setWalletConnectDeepLink(safeAppUrl, name);\n      const url = new URL(safeAppUrl);\n      url.searchParams.set(\"startapp\", formattedUri);\n      const link = url.toString();\n      return link;\n    }\n    if (!safeAppUrl.endsWith(\"/\")) {\n      safeAppUrl = `${safeAppUrl}/`;\n    }\n    this.setWalletConnectDeepLink(safeAppUrl, name);\n    const encodedWcUrl = encodeURIComponent(wcUri);\n    return `${safeAppUrl}wc?uri=${encodedWcUrl}`;\n  },\n  async wait(miliseconds) {\n    return new Promise((resolve) => {\n      setTimeout(resolve, miliseconds);\n    });\n  },\n  openHref(href, target) {\n    const adjustedTarget = this.isTelegram() ? \"_blank\" : target;\n    window.open(href, adjustedTarget, \"noreferrer noopener\");\n  },\n  setWalletConnectDeepLink(href, name) {\n    try {\n      localStorage.setItem(CoreUtil.WALLETCONNECT_DEEPLINK_CHOICE, JSON.stringify({ href, name }));\n    } catch (e) {\n      console.info(\"Unable to set WalletConnect deep link\");\n    }\n  },\n  setWalletConnectAndroidDeepLink(wcUri) {\n    try {\n      const [href] = wcUri.split(\"?\");\n      localStorage.setItem(\n        CoreUtil.WALLETCONNECT_DEEPLINK_CHOICE,\n        JSON.stringify({ href, name: \"Android\" })\n      );\n    } catch (e) {\n      console.info(\"Unable to set WalletConnect android deep link\");\n    }\n  },\n  removeWalletConnectDeepLink() {\n    try {\n      localStorage.removeItem(CoreUtil.WALLETCONNECT_DEEPLINK_CHOICE);\n    } catch (e) {\n      console.info(\"Unable to remove WalletConnect deep link\");\n    }\n  },\n  setModalVersionInStorage() {\n    try {\n      if (typeof localStorage !== \"undefined\") {\n        localStorage.setItem(CoreUtil.WCM_VERSION, \"2.7.0\");\n      }\n    } catch (e) {\n      console.info(\"Unable to set Web3Modal version in storage\");\n    }\n  },\n  getWalletRouterData() {\n    var _a;\n    const routerData = (_a = RouterCtrl.state.data) == null ? void 0 : _a.Wallet;\n    if (!routerData) {\n      throw new Error('Missing \"Wallet\" view data');\n    }\n    return routerData;\n  }\n};\n\nconst isEnabled = typeof location !== \"undefined\" && (location.hostname.includes(\"localhost\") || location.protocol.includes(\"https\"));\nconst state$6 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  enabled: isEnabled,\n  userSessionId: \"\",\n  events: [],\n  connectedWalletId: void 0\n});\nconst EventsCtrl = {\n  state: state$6,\n  subscribe(callback) {\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.subscribe)(state$6.events, () => callback((0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.snapshot)(state$6.events[state$6.events.length - 1])));\n  },\n  initialize() {\n    if (state$6.enabled && typeof (crypto == null ? void 0 : crypto.randomUUID) !== \"undefined\") {\n      state$6.userSessionId = crypto.randomUUID();\n    }\n  },\n  setConnectedWalletId(connectedWalletId) {\n    state$6.connectedWalletId = connectedWalletId;\n  },\n  click(data) {\n    if (state$6.enabled) {\n      const event = {\n        type: \"CLICK\",\n        name: data.name,\n        userSessionId: state$6.userSessionId,\n        timestamp: Date.now(),\n        data\n      };\n      state$6.events.push(event);\n    }\n  },\n  track(data) {\n    if (state$6.enabled) {\n      const event = {\n        type: \"TRACK\",\n        name: data.name,\n        userSessionId: state$6.userSessionId,\n        timestamp: Date.now(),\n        data\n      };\n      state$6.events.push(event);\n    }\n  },\n  view(data) {\n    if (state$6.enabled) {\n      const event = {\n        type: \"VIEW\",\n        name: data.name,\n        userSessionId: state$6.userSessionId,\n        timestamp: Date.now(),\n        data\n      };\n      state$6.events.push(event);\n    }\n  }\n};\n\nconst state$5 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  chains: void 0,\n  walletConnectUri: void 0,\n  isAuth: false,\n  isCustomDesktop: false,\n  isCustomMobile: false,\n  isDataLoaded: false,\n  isUiLoaded: false\n});\nconst OptionsCtrl = {\n  state: state$5,\n  subscribe(callback) {\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.subscribe)(state$5, () => callback(state$5));\n  },\n  setChains(chains) {\n    state$5.chains = chains;\n  },\n  setWalletConnectUri(walletConnectUri) {\n    state$5.walletConnectUri = walletConnectUri;\n  },\n  setIsCustomDesktop(isCustomDesktop) {\n    state$5.isCustomDesktop = isCustomDesktop;\n  },\n  setIsCustomMobile(isCustomMobile) {\n    state$5.isCustomMobile = isCustomMobile;\n  },\n  setIsDataLoaded(isDataLoaded) {\n    state$5.isDataLoaded = isDataLoaded;\n  },\n  setIsUiLoaded(isUiLoaded) {\n    state$5.isUiLoaded = isUiLoaded;\n  },\n  setIsAuth(isAuth) {\n    state$5.isAuth = isAuth;\n  }\n};\n\nconst state$4 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  projectId: \"\",\n  mobileWallets: void 0,\n  desktopWallets: void 0,\n  walletImages: void 0,\n  chains: void 0,\n  enableAuthMode: false,\n  enableExplorer: true,\n  explorerExcludedWalletIds: void 0,\n  explorerRecommendedWalletIds: void 0,\n  termsOfServiceUrl: void 0,\n  privacyPolicyUrl: void 0\n});\nconst ConfigCtrl = {\n  state: state$4,\n  subscribe(callback) {\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.subscribe)(state$4, () => callback(state$4));\n  },\n  setConfig(config) {\n    var _a, _b;\n    EventsCtrl.initialize();\n    OptionsCtrl.setChains(config.chains);\n    OptionsCtrl.setIsAuth(Boolean(config.enableAuthMode));\n    OptionsCtrl.setIsCustomMobile(Boolean((_a = config.mobileWallets) == null ? void 0 : _a.length));\n    OptionsCtrl.setIsCustomDesktop(Boolean((_b = config.desktopWallets) == null ? void 0 : _b.length));\n    CoreUtil.setModalVersionInStorage();\n    Object.assign(state$4, config);\n  }\n};\n\nvar __defProp$2 = Object.defineProperty;\nvar __getOwnPropSymbols$2 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$2 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$2 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$2 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$2.call(b, prop))\n      __defNormalProp$2(a, prop, b[prop]);\n  if (__getOwnPropSymbols$2)\n    for (var prop of __getOwnPropSymbols$2(b)) {\n      if (__propIsEnum$2.call(b, prop))\n        __defNormalProp$2(a, prop, b[prop]);\n    }\n  return a;\n};\nconst W3M_API = \"https://explorer-api.walletconnect.com\";\nconst SDK_TYPE = \"wcm\";\nconst SDK_VERSION = `js-${\"2.7.0\"}`;\nasync function fetchListings(endpoint, params) {\n  const allParams = __spreadValues$2({ sdkType: SDK_TYPE, sdkVersion: SDK_VERSION }, params);\n  const url = new URL(endpoint, W3M_API);\n  url.searchParams.append(\"projectId\", ConfigCtrl.state.projectId);\n  Object.entries(allParams).forEach(([key, value]) => {\n    if (value) {\n      url.searchParams.append(key, String(value));\n    }\n  });\n  const request = await fetch(url);\n  return request.json();\n}\nconst ExplorerUtil = {\n  async getDesktopListings(params) {\n    return fetchListings(\"/w3m/v1/getDesktopListings\", params);\n  },\n  async getMobileListings(params) {\n    return fetchListings(\"/w3m/v1/getMobileListings\", params);\n  },\n  async getInjectedListings(params) {\n    return fetchListings(\"/w3m/v1/getInjectedListings\", params);\n  },\n  async getAllListings(params) {\n    return fetchListings(\"/w3m/v1/getAllListings\", params);\n  },\n  getWalletImageUrl(imageId) {\n    return `${W3M_API}/w3m/v1/getWalletImage/${imageId}?projectId=${ConfigCtrl.state.projectId}&sdkType=${SDK_TYPE}&sdkVersion=${SDK_VERSION}`;\n  },\n  getAssetImageUrl(imageId) {\n    return `${W3M_API}/w3m/v1/getAssetImage/${imageId}?projectId=${ConfigCtrl.state.projectId}&sdkType=${SDK_TYPE}&sdkVersion=${SDK_VERSION}`;\n  }\n};\n\nvar __defProp$1 = Object.defineProperty;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$1.call(b, prop))\n      __defNormalProp$1(a, prop, b[prop]);\n  if (__getOwnPropSymbols$1)\n    for (var prop of __getOwnPropSymbols$1(b)) {\n      if (__propIsEnum$1.call(b, prop))\n        __defNormalProp$1(a, prop, b[prop]);\n    }\n  return a;\n};\nconst isMobile = CoreUtil.isMobile();\nconst state$3 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  wallets: { listings: [], total: 0, page: 1 },\n  search: { listings: [], total: 0, page: 1 },\n  recomendedWallets: []\n});\nconst ExplorerCtrl = {\n  state: state$3,\n  async getRecomendedWallets() {\n    const { explorerRecommendedWalletIds, explorerExcludedWalletIds } = ConfigCtrl.state;\n    if (explorerRecommendedWalletIds === \"NONE\" || explorerExcludedWalletIds === \"ALL\" && !explorerRecommendedWalletIds) {\n      return state$3.recomendedWallets;\n    }\n    if (CoreUtil.isArray(explorerRecommendedWalletIds)) {\n      const recommendedIds = explorerRecommendedWalletIds.join(\",\");\n      const params = { recommendedIds };\n      const { listings } = await ExplorerUtil.getAllListings(params);\n      const listingsArr = Object.values(listings);\n      listingsArr.sort((a, b) => {\n        const aIndex = explorerRecommendedWalletIds.indexOf(a.id);\n        const bIndex = explorerRecommendedWalletIds.indexOf(b.id);\n        return aIndex - bIndex;\n      });\n      state$3.recomendedWallets = listingsArr;\n    } else {\n      const { chains, isAuth } = OptionsCtrl.state;\n      const chainsFilter = chains == null ? void 0 : chains.join(\",\");\n      const isExcluded = CoreUtil.isArray(explorerExcludedWalletIds);\n      const params = {\n        page: 1,\n        sdks: isAuth ? \"auth_v1\" : void 0,\n        entries: CoreUtil.RECOMMENDED_WALLET_AMOUNT,\n        chains: chainsFilter,\n        version: 2,\n        excludedIds: isExcluded ? explorerExcludedWalletIds.join(\",\") : void 0\n      };\n      const { listings } = isMobile ? await ExplorerUtil.getMobileListings(params) : await ExplorerUtil.getDesktopListings(params);\n      state$3.recomendedWallets = Object.values(listings);\n    }\n    return state$3.recomendedWallets;\n  },\n  async getWallets(params) {\n    const extendedParams = __spreadValues$1({}, params);\n    const { explorerRecommendedWalletIds, explorerExcludedWalletIds } = ConfigCtrl.state;\n    const { recomendedWallets } = state$3;\n    if (explorerExcludedWalletIds === \"ALL\") {\n      return state$3.wallets;\n    }\n    if (recomendedWallets.length) {\n      extendedParams.excludedIds = recomendedWallets.map((wallet) => wallet.id).join(\",\");\n    } else if (CoreUtil.isArray(explorerRecommendedWalletIds)) {\n      extendedParams.excludedIds = explorerRecommendedWalletIds.join(\",\");\n    }\n    if (CoreUtil.isArray(explorerExcludedWalletIds)) {\n      extendedParams.excludedIds = [extendedParams.excludedIds, explorerExcludedWalletIds].filter(Boolean).join(\",\");\n    }\n    if (OptionsCtrl.state.isAuth) {\n      extendedParams.sdks = \"auth_v1\";\n    }\n    const { page, search } = params;\n    const { listings: listingsObj, total } = isMobile ? await ExplorerUtil.getMobileListings(extendedParams) : await ExplorerUtil.getDesktopListings(extendedParams);\n    const listings = Object.values(listingsObj);\n    const type = search ? \"search\" : \"wallets\";\n    state$3[type] = {\n      listings: [...state$3[type].listings, ...listings],\n      total,\n      page: page != null ? page : 1\n    };\n    return { listings, total };\n  },\n  getWalletImageUrl(imageId) {\n    return ExplorerUtil.getWalletImageUrl(imageId);\n  },\n  getAssetImageUrl(imageId) {\n    return ExplorerUtil.getAssetImageUrl(imageId);\n  },\n  resetSearch() {\n    state$3.search = { listings: [], total: 0, page: 1 };\n  }\n};\n\nconst state$2 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  open: false\n});\nconst ModalCtrl = {\n  state: state$2,\n  subscribe(callback) {\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.subscribe)(state$2, () => callback(state$2));\n  },\n  async open(options) {\n    return new Promise((resolve) => {\n      const { isUiLoaded, isDataLoaded } = OptionsCtrl.state;\n      CoreUtil.removeWalletConnectDeepLink();\n      OptionsCtrl.setWalletConnectUri(options == null ? void 0 : options.uri);\n      OptionsCtrl.setChains(options == null ? void 0 : options.chains);\n      RouterCtrl.reset(\"ConnectWallet\");\n      if (isUiLoaded && isDataLoaded) {\n        state$2.open = true;\n        resolve();\n      } else {\n        const interval = setInterval(() => {\n          const opts = OptionsCtrl.state;\n          if (opts.isUiLoaded && opts.isDataLoaded) {\n            clearInterval(interval);\n            state$2.open = true;\n            resolve();\n          }\n        }, 200);\n      }\n    });\n  },\n  close() {\n    state$2.open = false;\n  }\n};\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nfunction isDarkMode() {\n  return typeof matchMedia !== \"undefined\" && matchMedia(\"(prefers-color-scheme: dark)\").matches;\n}\nconst state$1 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  themeMode: isDarkMode() ? \"dark\" : \"light\"\n});\nconst ThemeCtrl = {\n  state: state$1,\n  subscribe(callback) {\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.subscribe)(state$1, () => callback(state$1));\n  },\n  setThemeConfig(theme) {\n    const { themeMode, themeVariables } = theme;\n    if (themeMode) {\n      state$1.themeMode = themeMode;\n    }\n    if (themeVariables) {\n      state$1.themeVariables = __spreadValues({}, themeVariables);\n    }\n  }\n};\n\nconst state = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.proxy)({\n  open: false,\n  message: \"\",\n  variant: \"success\"\n});\nconst ToastCtrl = {\n  state,\n  subscribe(callback) {\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_0__.subscribe)(state, () => callback(state));\n  },\n  openToast(message, variant) {\n    state.open = true;\n    state.message = message;\n    state.variant = variant;\n  },\n  closeToast() {\n    state.open = false;\n  }\n};\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9tb2RhbC1jb3JlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBNEQ7O0FBRTVELGdCQUFnQixxREFBSztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5REFBUztBQUNwQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixXQUFXO0FBQ2pDO0FBQ0E7QUFDQSxzQkFBc0IsV0FBVztBQUNqQztBQUNBO0FBQ0E7QUFDQSxjQUFjLFdBQVcsU0FBUyxhQUFhO0FBQy9DLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsTUFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixXQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsV0FBVyxTQUFTLGFBQWE7QUFDL0MsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFD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QSxZQUFZLDRCQUE0QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxxREFBSztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5REFBUztBQUNwQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRW9IO0FBQ3BIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9tb2RhbC1jb3JlL2Rpc3QvaW5kZXguanM/NTNmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm94eSwgc3Vic2NyaWJlLCBzbmFwc2hvdCB9IGZyb20gJ3ZhbHRpby92YW5pbGxhJztcblxuY29uc3Qgc3RhdGUkNyA9IHByb3h5KHtcbiAgaGlzdG9yeTogW1wiQ29ubmVjdFdhbGxldFwiXSxcbiAgdmlldzogXCJDb25uZWN0V2FsbGV0XCIsXG4gIGRhdGE6IHZvaWQgMFxufSk7XG5jb25zdCBSb3V0ZXJDdHJsID0ge1xuICBzdGF0ZTogc3RhdGUkNyxcbiAgc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHN1YnNjcmliZShzdGF0ZSQ3LCAoKSA9PiBjYWxsYmFjayhzdGF0ZSQ3KSk7XG4gIH0sXG4gIHB1c2godmlldywgZGF0YSkge1xuICAgIGlmICh2aWV3ICE9PSBzdGF0ZSQ3LnZpZXcpIHtcbiAgICAgIHN0YXRlJDcudmlldyA9IHZpZXc7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBzdGF0ZSQ3LmRhdGEgPSBkYXRhO1xuICAgICAgfVxuICAgICAgc3RhdGUkNy5oaXN0b3J5LnB1c2godmlldyk7XG4gICAgfVxuICB9LFxuICByZXNldCh2aWV3KSB7XG4gICAgc3RhdGUkNy52aWV3ID0gdmlldztcbiAgICBzdGF0ZSQ3Lmhpc3RvcnkgPSBbdmlld107XG4gIH0sXG4gIHJlcGxhY2Uodmlldykge1xuICAgIGlmIChzdGF0ZSQ3Lmhpc3RvcnkubGVuZ3RoID4gMSkge1xuICAgICAgc3RhdGUkNy5oaXN0b3J5W3N0YXRlJDcuaGlzdG9yeS5sZW5ndGggLSAxXSA9IHZpZXc7XG4gICAgICBzdGF0ZSQ3LnZpZXcgPSB2aWV3O1xuICAgIH1cbiAgfSxcbiAgZ29CYWNrKCkge1xuICAgIGlmIChzdGF0ZSQ3Lmhpc3RvcnkubGVuZ3RoID4gMSkge1xuICAgICAgc3RhdGUkNy5oaXN0b3J5LnBvcCgpO1xuICAgICAgY29uc3QgW2xhc3RdID0gc3RhdGUkNy5oaXN0b3J5LnNsaWNlKC0xKTtcbiAgICAgIHN0YXRlJDcudmlldyA9IGxhc3Q7XG4gICAgfVxuICB9LFxuICBzZXREYXRhKGRhdGEpIHtcbiAgICBzdGF0ZSQ3LmRhdGEgPSBkYXRhO1xuICB9XG59O1xuXG5jb25zdCBDb3JlVXRpbCA9IHtcbiAgV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0U6IFwiV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0VcIixcbiAgV0NNX1ZFUlNJT046IFwiV0NNX1ZFUlNJT05cIixcbiAgUkVDT01NRU5ERURfV0FMTEVUX0FNT1VOVDogOSxcbiAgaXNNb2JpbGUoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKFxuICAgICAgICB3aW5kb3cubWF0Y2hNZWRpYShcIihwb2ludGVyOmNvYXJzZSlcIikubWF0Y2hlcyB8fCAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8T3BlcmEgTWluaS91LnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgaXNBbmRyb2lkKCkge1xuICAgIHJldHVybiBDb3JlVXRpbC5pc01vYmlsZSgpICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImFuZHJvaWRcIik7XG4gIH0sXG4gIGlzSW9zKCkge1xuICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBDb3JlVXRpbC5pc01vYmlsZSgpICYmICh1YS5pbmNsdWRlcyhcImlwaG9uZVwiKSB8fCB1YS5pbmNsdWRlcyhcImlwYWRcIikpO1xuICB9LFxuICBpc0h0dHBVcmwodXJsKSB7XG4gICAgcmV0dXJuIHVybC5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fCB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpO1xuICB9LFxuICBpc0FycmF5KGRhdGEpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkYXRhKSAmJiBkYXRhLmxlbmd0aCA+IDA7XG4gIH0sXG4gIGlzVGVsZWdyYW0oKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAoQm9vbGVhbih3aW5kb3cuVGVsZWdyYW1XZWJ2aWV3UHJveHkpIHx8IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgQm9vbGVhbih3aW5kb3cuVGVsZWdyYW0pIHx8IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgQm9vbGVhbih3aW5kb3cuVGVsZWdyYW1XZWJ2aWV3UHJveHlQcm90bykpO1xuICB9LFxuICBmb3JtYXROYXRpdmVVcmwoYXBwVXJsLCB3Y1VyaSwgbmFtZSkge1xuICAgIGlmIChDb3JlVXRpbC5pc0h0dHBVcmwoYXBwVXJsKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VW5pdmVyc2FsVXJsKGFwcFVybCwgd2NVcmksIG5hbWUpO1xuICAgIH1cbiAgICBsZXQgc2FmZUFwcFVybCA9IGFwcFVybDtcbiAgICBpZiAoIXNhZmVBcHBVcmwuaW5jbHVkZXMoXCI6Ly9cIikpIHtcbiAgICAgIHNhZmVBcHBVcmwgPSBhcHBVcmwucmVwbGFjZUFsbChcIi9cIiwgXCJcIikucmVwbGFjZUFsbChcIjpcIiwgXCJcIik7XG4gICAgICBzYWZlQXBwVXJsID0gYCR7c2FmZUFwcFVybH06Ly9gO1xuICAgIH1cbiAgICBpZiAoIXNhZmVBcHBVcmwuZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICBzYWZlQXBwVXJsID0gYCR7c2FmZUFwcFVybH0vYDtcbiAgICB9XG4gICAgdGhpcy5zZXRXYWxsZXRDb25uZWN0RGVlcExpbmsoc2FmZUFwcFVybCwgbmFtZSk7XG4gICAgY29uc3QgZW5jb2RlZFdjVXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KHdjVXJpKTtcbiAgICByZXR1cm4gYCR7c2FmZUFwcFVybH13Yz91cmk9JHtlbmNvZGVkV2NVcmx9YDtcbiAgfSxcbiAgZm9ybWF0VW5pdmVyc2FsVXJsKGFwcFVybCwgd2NVcmksIG5hbWUpIHtcbiAgICBpZiAoIUNvcmVVdGlsLmlzSHR0cFVybChhcHBVcmwpKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXROYXRpdmVVcmwoYXBwVXJsLCB3Y1VyaSwgbmFtZSk7XG4gICAgfVxuICAgIGxldCBzYWZlQXBwVXJsID0gYXBwVXJsO1xuICAgIGlmIChzYWZlQXBwVXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL3QubWVcIikpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFVyaSA9IEJ1ZmZlci5mcm9tKHdjVXJpKS50b1N0cmluZyhcImJhc2U2NFwiKS5yZXBsYWNlKC9bPV0vZywgXCJcIik7XG4gICAgICBpZiAoc2FmZUFwcFVybC5lbmRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgc2FmZUFwcFVybCA9IHNhZmVBcHBVcmwuc2xpY2UoMCwgLTEpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRXYWxsZXRDb25uZWN0RGVlcExpbmsoc2FmZUFwcFVybCwgbmFtZSk7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHNhZmVBcHBVcmwpO1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzdGFydGFwcFwiLCBmb3JtYXR0ZWRVcmkpO1xuICAgICAgY29uc3QgbGluayA9IHVybC50b1N0cmluZygpO1xuICAgICAgcmV0dXJuIGxpbms7XG4gICAgfVxuICAgIGlmICghc2FmZUFwcFVybC5lbmRzV2l0aChcIi9cIikpIHtcbiAgICAgIHNhZmVBcHBVcmwgPSBgJHtzYWZlQXBwVXJsfS9gO1xuICAgIH1cbiAgICB0aGlzLnNldFdhbGxldENvbm5lY3REZWVwTGluayhzYWZlQXBwVXJsLCBuYW1lKTtcbiAgICBjb25zdCBlbmNvZGVkV2NVcmwgPSBlbmNvZGVVUklDb21wb25lbnQod2NVcmkpO1xuICAgIHJldHVybiBgJHtzYWZlQXBwVXJsfXdjP3VyaT0ke2VuY29kZWRXY1VybH1gO1xuICB9LFxuICBhc3luYyB3YWl0KG1pbGlzZWNvbmRzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1pbGlzZWNvbmRzKTtcbiAgICB9KTtcbiAgfSxcbiAgb3BlbkhyZWYoaHJlZiwgdGFyZ2V0KSB7XG4gICAgY29uc3QgYWRqdXN0ZWRUYXJnZXQgPSB0aGlzLmlzVGVsZWdyYW0oKSA/IFwiX2JsYW5rXCIgOiB0YXJnZXQ7XG4gICAgd2luZG93Lm9wZW4oaHJlZiwgYWRqdXN0ZWRUYXJnZXQsIFwibm9yZWZlcnJlciBub29wZW5lclwiKTtcbiAgfSxcbiAgc2V0V2FsbGV0Q29ubmVjdERlZXBMaW5rKGhyZWYsIG5hbWUpIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oQ29yZVV0aWwuV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0UsIEpTT04uc3RyaW5naWZ5KHsgaHJlZiwgbmFtZSB9KSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5pbmZvKFwiVW5hYmxlIHRvIHNldCBXYWxsZXRDb25uZWN0IGRlZXAgbGlua1wiKTtcbiAgICB9XG4gIH0sXG4gIHNldFdhbGxldENvbm5lY3RBbmRyb2lkRGVlcExpbmsod2NVcmkpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW2hyZWZdID0gd2NVcmkuc3BsaXQoXCI/XCIpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgIENvcmVVdGlsLldBTExFVENPTk5FQ1RfREVFUExJTktfQ0hPSUNFLFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7IGhyZWYsIG5hbWU6IFwiQW5kcm9pZFwiIH0pXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcIlVuYWJsZSB0byBzZXQgV2FsbGV0Q29ubmVjdCBhbmRyb2lkIGRlZXAgbGlua1wiKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZVdhbGxldENvbm5lY3REZWVwTGluaygpIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQ29yZVV0aWwuV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcIlVuYWJsZSB0byByZW1vdmUgV2FsbGV0Q29ubmVjdCBkZWVwIGxpbmtcIik7XG4gICAgfVxuICB9LFxuICBzZXRNb2RhbFZlcnNpb25JblN0b3JhZ2UoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKENvcmVVdGlsLldDTV9WRVJTSU9OLCBcIjIuNy4wXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcIlVuYWJsZSB0byBzZXQgV2ViM01vZGFsIHZlcnNpb24gaW4gc3RvcmFnZVwiKTtcbiAgICB9XG4gIH0sXG4gIGdldFdhbGxldFJvdXRlckRhdGEoKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHJvdXRlckRhdGEgPSAoX2EgPSBSb3V0ZXJDdHJsLnN0YXRlLmRhdGEpID09IG51bGwgPyB2b2lkIDAgOiBfYS5XYWxsZXQ7XG4gICAgaWYgKCFyb3V0ZXJEYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgXCJXYWxsZXRcIiB2aWV3IGRhdGEnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJvdXRlckRhdGE7XG4gIH1cbn07XG5cbmNvbnN0IGlzRW5hYmxlZCA9IHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJiAobG9jYXRpb24uaG9zdG5hbWUuaW5jbHVkZXMoXCJsb2NhbGhvc3RcIikgfHwgbG9jYXRpb24ucHJvdG9jb2wuaW5jbHVkZXMoXCJodHRwc1wiKSk7XG5jb25zdCBzdGF0ZSQ2ID0gcHJveHkoe1xuICBlbmFibGVkOiBpc0VuYWJsZWQsXG4gIHVzZXJTZXNzaW9uSWQ6IFwiXCIsXG4gIGV2ZW50czogW10sXG4gIGNvbm5lY3RlZFdhbGxldElkOiB2b2lkIDBcbn0pO1xuY29uc3QgRXZlbnRzQ3RybCA9IHtcbiAgc3RhdGU6IHN0YXRlJDYsXG4gIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgIHJldHVybiBzdWJzY3JpYmUoc3RhdGUkNi5ldmVudHMsICgpID0+IGNhbGxiYWNrKHNuYXBzaG90KHN0YXRlJDYuZXZlbnRzW3N0YXRlJDYuZXZlbnRzLmxlbmd0aCAtIDFdKSkpO1xuICB9LFxuICBpbml0aWFsaXplKCkge1xuICAgIGlmIChzdGF0ZSQ2LmVuYWJsZWQgJiYgdHlwZW9mIChjcnlwdG8gPT0gbnVsbCA/IHZvaWQgMCA6IGNyeXB0by5yYW5kb21VVUlEKSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3RhdGUkNi51c2VyU2Vzc2lvbklkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICB9XG4gIH0sXG4gIHNldENvbm5lY3RlZFdhbGxldElkKGNvbm5lY3RlZFdhbGxldElkKSB7XG4gICAgc3RhdGUkNi5jb25uZWN0ZWRXYWxsZXRJZCA9IGNvbm5lY3RlZFdhbGxldElkO1xuICB9LFxuICBjbGljayhkYXRhKSB7XG4gICAgaWYgKHN0YXRlJDYuZW5hYmxlZCkge1xuICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgIHR5cGU6IFwiQ0xJQ0tcIixcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICB1c2VyU2Vzc2lvbklkOiBzdGF0ZSQ2LnVzZXJTZXNzaW9uSWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGF0YVxuICAgICAgfTtcbiAgICAgIHN0YXRlJDYuZXZlbnRzLnB1c2goZXZlbnQpO1xuICAgIH1cbiAgfSxcbiAgdHJhY2soZGF0YSkge1xuICAgIGlmIChzdGF0ZSQ2LmVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICB0eXBlOiBcIlRSQUNLXCIsXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgdXNlclNlc3Npb25JZDogc3RhdGUkNi51c2VyU2Vzc2lvbklkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGRhdGFcbiAgICAgIH07XG4gICAgICBzdGF0ZSQ2LmV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICB9XG4gIH0sXG4gIHZpZXcoZGF0YSkge1xuICAgIGlmIChzdGF0ZSQ2LmVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICB0eXBlOiBcIlZJRVdcIixcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICB1c2VyU2Vzc2lvbklkOiBzdGF0ZSQ2LnVzZXJTZXNzaW9uSWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGF0YVxuICAgICAgfTtcbiAgICAgIHN0YXRlJDYuZXZlbnRzLnB1c2goZXZlbnQpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3Qgc3RhdGUkNSA9IHByb3h5KHtcbiAgY2hhaW5zOiB2b2lkIDAsXG4gIHdhbGxldENvbm5lY3RVcmk6IHZvaWQgMCxcbiAgaXNBdXRoOiBmYWxzZSxcbiAgaXNDdXN0b21EZXNrdG9wOiBmYWxzZSxcbiAgaXNDdXN0b21Nb2JpbGU6IGZhbHNlLFxuICBpc0RhdGFMb2FkZWQ6IGZhbHNlLFxuICBpc1VpTG9hZGVkOiBmYWxzZVxufSk7XG5jb25zdCBPcHRpb25zQ3RybCA9IHtcbiAgc3RhdGU6IHN0YXRlJDUsXG4gIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgIHJldHVybiBzdWJzY3JpYmUoc3RhdGUkNSwgKCkgPT4gY2FsbGJhY2soc3RhdGUkNSkpO1xuICB9LFxuICBzZXRDaGFpbnMoY2hhaW5zKSB7XG4gICAgc3RhdGUkNS5jaGFpbnMgPSBjaGFpbnM7XG4gIH0sXG4gIHNldFdhbGxldENvbm5lY3RVcmkod2FsbGV0Q29ubmVjdFVyaSkge1xuICAgIHN0YXRlJDUud2FsbGV0Q29ubmVjdFVyaSA9IHdhbGxldENvbm5lY3RVcmk7XG4gIH0sXG4gIHNldElzQ3VzdG9tRGVza3RvcChpc0N1c3RvbURlc2t0b3ApIHtcbiAgICBzdGF0ZSQ1LmlzQ3VzdG9tRGVza3RvcCA9IGlzQ3VzdG9tRGVza3RvcDtcbiAgfSxcbiAgc2V0SXNDdXN0b21Nb2JpbGUoaXNDdXN0b21Nb2JpbGUpIHtcbiAgICBzdGF0ZSQ1LmlzQ3VzdG9tTW9iaWxlID0gaXNDdXN0b21Nb2JpbGU7XG4gIH0sXG4gIHNldElzRGF0YUxvYWRlZChpc0RhdGFMb2FkZWQpIHtcbiAgICBzdGF0ZSQ1LmlzRGF0YUxvYWRlZCA9IGlzRGF0YUxvYWRlZDtcbiAgfSxcbiAgc2V0SXNVaUxvYWRlZChpc1VpTG9hZGVkKSB7XG4gICAgc3RhdGUkNS5pc1VpTG9hZGVkID0gaXNVaUxvYWRlZDtcbiAgfSxcbiAgc2V0SXNBdXRoKGlzQXV0aCkge1xuICAgIHN0YXRlJDUuaXNBdXRoID0gaXNBdXRoO1xuICB9XG59O1xuXG5jb25zdCBzdGF0ZSQ0ID0gcHJveHkoe1xuICBwcm9qZWN0SWQ6IFwiXCIsXG4gIG1vYmlsZVdhbGxldHM6IHZvaWQgMCxcbiAgZGVza3RvcFdhbGxldHM6IHZvaWQgMCxcbiAgd2FsbGV0SW1hZ2VzOiB2b2lkIDAsXG4gIGNoYWluczogdm9pZCAwLFxuICBlbmFibGVBdXRoTW9kZTogZmFsc2UsXG4gIGVuYWJsZUV4cGxvcmVyOiB0cnVlLFxuICBleHBsb3JlckV4Y2x1ZGVkV2FsbGV0SWRzOiB2b2lkIDAsXG4gIGV4cGxvcmVyUmVjb21tZW5kZWRXYWxsZXRJZHM6IHZvaWQgMCxcbiAgdGVybXNPZlNlcnZpY2VVcmw6IHZvaWQgMCxcbiAgcHJpdmFjeVBvbGljeVVybDogdm9pZCAwXG59KTtcbmNvbnN0IENvbmZpZ0N0cmwgPSB7XG4gIHN0YXRlOiBzdGF0ZSQ0LFxuICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gc3Vic2NyaWJlKHN0YXRlJDQsICgpID0+IGNhbGxiYWNrKHN0YXRlJDQpKTtcbiAgfSxcbiAgc2V0Q29uZmlnKGNvbmZpZykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgRXZlbnRzQ3RybC5pbml0aWFsaXplKCk7XG4gICAgT3B0aW9uc0N0cmwuc2V0Q2hhaW5zKGNvbmZpZy5jaGFpbnMpO1xuICAgIE9wdGlvbnNDdHJsLnNldElzQXV0aChCb29sZWFuKGNvbmZpZy5lbmFibGVBdXRoTW9kZSkpO1xuICAgIE9wdGlvbnNDdHJsLnNldElzQ3VzdG9tTW9iaWxlKEJvb2xlYW4oKF9hID0gY29uZmlnLm1vYmlsZVdhbGxldHMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5sZW5ndGgpKTtcbiAgICBPcHRpb25zQ3RybC5zZXRJc0N1c3RvbURlc2t0b3AoQm9vbGVhbigoX2IgPSBjb25maWcuZGVza3RvcFdhbGxldHMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5sZW5ndGgpKTtcbiAgICBDb3JlVXRpbC5zZXRNb2RhbFZlcnNpb25JblN0b3JhZ2UoKTtcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlJDQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbnZhciBfX2RlZlByb3AkMiA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BTeW1ib2xzJDIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCQyID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0kMiA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wJDIgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wJDIob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzJDIgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcCQyLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AkMihhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMkMilcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMkMihiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bSQyLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcCQyKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xuY29uc3QgVzNNX0FQSSA9IFwiaHR0cHM6Ly9leHBsb3Jlci1hcGkud2FsbGV0Y29ubmVjdC5jb21cIjtcbmNvbnN0IFNES19UWVBFID0gXCJ3Y21cIjtcbmNvbnN0IFNES19WRVJTSU9OID0gYGpzLSR7XCIyLjcuMFwifWA7XG5hc3luYyBmdW5jdGlvbiBmZXRjaExpc3RpbmdzKGVuZHBvaW50LCBwYXJhbXMpIHtcbiAgY29uc3QgYWxsUGFyYW1zID0gX19zcHJlYWRWYWx1ZXMkMih7IHNka1R5cGU6IFNES19UWVBFLCBzZGtWZXJzaW9uOiBTREtfVkVSU0lPTiB9LCBwYXJhbXMpO1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKGVuZHBvaW50LCBXM01fQVBJKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJwcm9qZWN0SWRcIiwgQ29uZmlnQ3RybC5zdGF0ZS5wcm9qZWN0SWQpO1xuICBPYmplY3QuZW50cmllcyhhbGxQYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBTdHJpbmcodmFsdWUpKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgcmV0dXJuIHJlcXVlc3QuanNvbigpO1xufVxuY29uc3QgRXhwbG9yZXJVdGlsID0ge1xuICBhc3luYyBnZXREZXNrdG9wTGlzdGluZ3MocGFyYW1zKSB7XG4gICAgcmV0dXJuIGZldGNoTGlzdGluZ3MoXCIvdzNtL3YxL2dldERlc2t0b3BMaXN0aW5nc1wiLCBwYXJhbXMpO1xuICB9LFxuICBhc3luYyBnZXRNb2JpbGVMaXN0aW5ncyhwYXJhbXMpIHtcbiAgICByZXR1cm4gZmV0Y2hMaXN0aW5ncyhcIi93M20vdjEvZ2V0TW9iaWxlTGlzdGluZ3NcIiwgcGFyYW1zKTtcbiAgfSxcbiAgYXN5bmMgZ2V0SW5qZWN0ZWRMaXN0aW5ncyhwYXJhbXMpIHtcbiAgICByZXR1cm4gZmV0Y2hMaXN0aW5ncyhcIi93M20vdjEvZ2V0SW5qZWN0ZWRMaXN0aW5nc1wiLCBwYXJhbXMpO1xuICB9LFxuICBhc3luYyBnZXRBbGxMaXN0aW5ncyhwYXJhbXMpIHtcbiAgICByZXR1cm4gZmV0Y2hMaXN0aW5ncyhcIi93M20vdjEvZ2V0QWxsTGlzdGluZ3NcIiwgcGFyYW1zKTtcbiAgfSxcbiAgZ2V0V2FsbGV0SW1hZ2VVcmwoaW1hZ2VJZCkge1xuICAgIHJldHVybiBgJHtXM01fQVBJfS93M20vdjEvZ2V0V2FsbGV0SW1hZ2UvJHtpbWFnZUlkfT9wcm9qZWN0SWQ9JHtDb25maWdDdHJsLnN0YXRlLnByb2plY3RJZH0mc2RrVHlwZT0ke1NES19UWVBFfSZzZGtWZXJzaW9uPSR7U0RLX1ZFUlNJT059YDtcbiAgfSxcbiAgZ2V0QXNzZXRJbWFnZVVybChpbWFnZUlkKSB7XG4gICAgcmV0dXJuIGAke1czTV9BUEl9L3czbS92MS9nZXRBc3NldEltYWdlLyR7aW1hZ2VJZH0/cHJvamVjdElkPSR7Q29uZmlnQ3RybC5zdGF0ZS5wcm9qZWN0SWR9JnNka1R5cGU9JHtTREtfVFlQRX0mc2RrVmVyc2lvbj0ke1NES19WRVJTSU9OfWA7XG4gIH1cbn07XG5cbnZhciBfX2RlZlByb3AkMSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BTeW1ib2xzJDEgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIF9faGFzT3duUHJvcCQxID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0kMSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wJDEgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wJDEob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzJDEgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcCQxLmNhbGwoYiwgcHJvcCkpXG4gICAgICBfX2RlZk5vcm1hbFByb3AkMShhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMkMSlcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMkMShiKSkge1xuICAgICAgaWYgKF9fcHJvcElzRW51bSQxLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcCQxKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xuY29uc3QgaXNNb2JpbGUgPSBDb3JlVXRpbC5pc01vYmlsZSgpO1xuY29uc3Qgc3RhdGUkMyA9IHByb3h5KHtcbiAgd2FsbGV0czogeyBsaXN0aW5nczogW10sIHRvdGFsOiAwLCBwYWdlOiAxIH0sXG4gIHNlYXJjaDogeyBsaXN0aW5nczogW10sIHRvdGFsOiAwLCBwYWdlOiAxIH0sXG4gIHJlY29tZW5kZWRXYWxsZXRzOiBbXVxufSk7XG5jb25zdCBFeHBsb3JlckN0cmwgPSB7XG4gIHN0YXRlOiBzdGF0ZSQzLFxuICBhc3luYyBnZXRSZWNvbWVuZGVkV2FsbGV0cygpIHtcbiAgICBjb25zdCB7IGV4cGxvcmVyUmVjb21tZW5kZWRXYWxsZXRJZHMsIGV4cGxvcmVyRXhjbHVkZWRXYWxsZXRJZHMgfSA9IENvbmZpZ0N0cmwuc3RhdGU7XG4gICAgaWYgKGV4cGxvcmVyUmVjb21tZW5kZWRXYWxsZXRJZHMgPT09IFwiTk9ORVwiIHx8IGV4cGxvcmVyRXhjbHVkZWRXYWxsZXRJZHMgPT09IFwiQUxMXCIgJiYgIWV4cGxvcmVyUmVjb21tZW5kZWRXYWxsZXRJZHMpIHtcbiAgICAgIHJldHVybiBzdGF0ZSQzLnJlY29tZW5kZWRXYWxsZXRzO1xuICAgIH1cbiAgICBpZiAoQ29yZVV0aWwuaXNBcnJheShleHBsb3JlclJlY29tbWVuZGVkV2FsbGV0SWRzKSkge1xuICAgICAgY29uc3QgcmVjb21tZW5kZWRJZHMgPSBleHBsb3JlclJlY29tbWVuZGVkV2FsbGV0SWRzLmpvaW4oXCIsXCIpO1xuICAgICAgY29uc3QgcGFyYW1zID0geyByZWNvbW1lbmRlZElkcyB9O1xuICAgICAgY29uc3QgeyBsaXN0aW5ncyB9ID0gYXdhaXQgRXhwbG9yZXJVdGlsLmdldEFsbExpc3RpbmdzKHBhcmFtcyk7XG4gICAgICBjb25zdCBsaXN0aW5nc0FyciA9IE9iamVjdC52YWx1ZXMobGlzdGluZ3MpO1xuICAgICAgbGlzdGluZ3NBcnIuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhSW5kZXggPSBleHBsb3JlclJlY29tbWVuZGVkV2FsbGV0SWRzLmluZGV4T2YoYS5pZCk7XG4gICAgICAgIGNvbnN0IGJJbmRleCA9IGV4cGxvcmVyUmVjb21tZW5kZWRXYWxsZXRJZHMuaW5kZXhPZihiLmlkKTtcbiAgICAgICAgcmV0dXJuIGFJbmRleCAtIGJJbmRleDtcbiAgICAgIH0pO1xuICAgICAgc3RhdGUkMy5yZWNvbWVuZGVkV2FsbGV0cyA9IGxpc3RpbmdzQXJyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7IGNoYWlucywgaXNBdXRoIH0gPSBPcHRpb25zQ3RybC5zdGF0ZTtcbiAgICAgIGNvbnN0IGNoYWluc0ZpbHRlciA9IGNoYWlucyA9PSBudWxsID8gdm9pZCAwIDogY2hhaW5zLmpvaW4oXCIsXCIpO1xuICAgICAgY29uc3QgaXNFeGNsdWRlZCA9IENvcmVVdGlsLmlzQXJyYXkoZXhwbG9yZXJFeGNsdWRlZFdhbGxldElkcyk7XG4gICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIHNka3M6IGlzQXV0aCA/IFwiYXV0aF92MVwiIDogdm9pZCAwLFxuICAgICAgICBlbnRyaWVzOiBDb3JlVXRpbC5SRUNPTU1FTkRFRF9XQUxMRVRfQU1PVU5ULFxuICAgICAgICBjaGFpbnM6IGNoYWluc0ZpbHRlcixcbiAgICAgICAgdmVyc2lvbjogMixcbiAgICAgICAgZXhjbHVkZWRJZHM6IGlzRXhjbHVkZWQgPyBleHBsb3JlckV4Y2x1ZGVkV2FsbGV0SWRzLmpvaW4oXCIsXCIpIDogdm9pZCAwXG4gICAgICB9O1xuICAgICAgY29uc3QgeyBsaXN0aW5ncyB9ID0gaXNNb2JpbGUgPyBhd2FpdCBFeHBsb3JlclV0aWwuZ2V0TW9iaWxlTGlzdGluZ3MocGFyYW1zKSA6IGF3YWl0IEV4cGxvcmVyVXRpbC5nZXREZXNrdG9wTGlzdGluZ3MocGFyYW1zKTtcbiAgICAgIHN0YXRlJDMucmVjb21lbmRlZFdhbGxldHMgPSBPYmplY3QudmFsdWVzKGxpc3RpbmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlJDMucmVjb21lbmRlZFdhbGxldHM7XG4gIH0sXG4gIGFzeW5jIGdldFdhbGxldHMocGFyYW1zKSB7XG4gICAgY29uc3QgZXh0ZW5kZWRQYXJhbXMgPSBfX3NwcmVhZFZhbHVlcyQxKHt9LCBwYXJhbXMpO1xuICAgIGNvbnN0IHsgZXhwbG9yZXJSZWNvbW1lbmRlZFdhbGxldElkcywgZXhwbG9yZXJFeGNsdWRlZFdhbGxldElkcyB9ID0gQ29uZmlnQ3RybC5zdGF0ZTtcbiAgICBjb25zdCB7IHJlY29tZW5kZWRXYWxsZXRzIH0gPSBzdGF0ZSQzO1xuICAgIGlmIChleHBsb3JlckV4Y2x1ZGVkV2FsbGV0SWRzID09PSBcIkFMTFwiKSB7XG4gICAgICByZXR1cm4gc3RhdGUkMy53YWxsZXRzO1xuICAgIH1cbiAgICBpZiAocmVjb21lbmRlZFdhbGxldHMubGVuZ3RoKSB7XG4gICAgICBleHRlbmRlZFBhcmFtcy5leGNsdWRlZElkcyA9IHJlY29tZW5kZWRXYWxsZXRzLm1hcCgod2FsbGV0KSA9PiB3YWxsZXQuaWQpLmpvaW4oXCIsXCIpO1xuICAgIH0gZWxzZSBpZiAoQ29yZVV0aWwuaXNBcnJheShleHBsb3JlclJlY29tbWVuZGVkV2FsbGV0SWRzKSkge1xuICAgICAgZXh0ZW5kZWRQYXJhbXMuZXhjbHVkZWRJZHMgPSBleHBsb3JlclJlY29tbWVuZGVkV2FsbGV0SWRzLmpvaW4oXCIsXCIpO1xuICAgIH1cbiAgICBpZiAoQ29yZVV0aWwuaXNBcnJheShleHBsb3JlckV4Y2x1ZGVkV2FsbGV0SWRzKSkge1xuICAgICAgZXh0ZW5kZWRQYXJhbXMuZXhjbHVkZWRJZHMgPSBbZXh0ZW5kZWRQYXJhbXMuZXhjbHVkZWRJZHMsIGV4cGxvcmVyRXhjbHVkZWRXYWxsZXRJZHNdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiLFwiKTtcbiAgICB9XG4gICAgaWYgKE9wdGlvbnNDdHJsLnN0YXRlLmlzQXV0aCkge1xuICAgICAgZXh0ZW5kZWRQYXJhbXMuc2RrcyA9IFwiYXV0aF92MVwiO1xuICAgIH1cbiAgICBjb25zdCB7IHBhZ2UsIHNlYXJjaCB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgbGlzdGluZ3M6IGxpc3RpbmdzT2JqLCB0b3RhbCB9ID0gaXNNb2JpbGUgPyBhd2FpdCBFeHBsb3JlclV0aWwuZ2V0TW9iaWxlTGlzdGluZ3MoZXh0ZW5kZWRQYXJhbXMpIDogYXdhaXQgRXhwbG9yZXJVdGlsLmdldERlc2t0b3BMaXN0aW5ncyhleHRlbmRlZFBhcmFtcyk7XG4gICAgY29uc3QgbGlzdGluZ3MgPSBPYmplY3QudmFsdWVzKGxpc3RpbmdzT2JqKTtcbiAgICBjb25zdCB0eXBlID0gc2VhcmNoID8gXCJzZWFyY2hcIiA6IFwid2FsbGV0c1wiO1xuICAgIHN0YXRlJDNbdHlwZV0gPSB7XG4gICAgICBsaXN0aW5nczogWy4uLnN0YXRlJDNbdHlwZV0ubGlzdGluZ3MsIC4uLmxpc3RpbmdzXSxcbiAgICAgIHRvdGFsLFxuICAgICAgcGFnZTogcGFnZSAhPSBudWxsID8gcGFnZSA6IDFcbiAgICB9O1xuICAgIHJldHVybiB7IGxpc3RpbmdzLCB0b3RhbCB9O1xuICB9LFxuICBnZXRXYWxsZXRJbWFnZVVybChpbWFnZUlkKSB7XG4gICAgcmV0dXJuIEV4cGxvcmVyVXRpbC5nZXRXYWxsZXRJbWFnZVVybChpbWFnZUlkKTtcbiAgfSxcbiAgZ2V0QXNzZXRJbWFnZVVybChpbWFnZUlkKSB7XG4gICAgcmV0dXJuIEV4cGxvcmVyVXRpbC5nZXRBc3NldEltYWdlVXJsKGltYWdlSWQpO1xuICB9LFxuICByZXNldFNlYXJjaCgpIHtcbiAgICBzdGF0ZSQzLnNlYXJjaCA9IHsgbGlzdGluZ3M6IFtdLCB0b3RhbDogMCwgcGFnZTogMSB9O1xuICB9XG59O1xuXG5jb25zdCBzdGF0ZSQyID0gcHJveHkoe1xuICBvcGVuOiBmYWxzZVxufSk7XG5jb25zdCBNb2RhbEN0cmwgPSB7XG4gIHN0YXRlOiBzdGF0ZSQyLFxuICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gc3Vic2NyaWJlKHN0YXRlJDIsICgpID0+IGNhbGxiYWNrKHN0YXRlJDIpKTtcbiAgfSxcbiAgYXN5bmMgb3BlbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCB7IGlzVWlMb2FkZWQsIGlzRGF0YUxvYWRlZCB9ID0gT3B0aW9uc0N0cmwuc3RhdGU7XG4gICAgICBDb3JlVXRpbC5yZW1vdmVXYWxsZXRDb25uZWN0RGVlcExpbmsoKTtcbiAgICAgIE9wdGlvbnNDdHJsLnNldFdhbGxldENvbm5lY3RVcmkob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy51cmkpO1xuICAgICAgT3B0aW9uc0N0cmwuc2V0Q2hhaW5zKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuY2hhaW5zKTtcbiAgICAgIFJvdXRlckN0cmwucmVzZXQoXCJDb25uZWN0V2FsbGV0XCIpO1xuICAgICAgaWYgKGlzVWlMb2FkZWQgJiYgaXNEYXRhTG9hZGVkKSB7XG4gICAgICAgIHN0YXRlJDIub3BlbiA9IHRydWU7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG9wdHMgPSBPcHRpb25zQ3RybC5zdGF0ZTtcbiAgICAgICAgICBpZiAob3B0cy5pc1VpTG9hZGVkICYmIG9wdHMuaXNEYXRhTG9hZGVkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgIHN0YXRlJDIub3BlbiA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAyMDApO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBjbG9zZSgpIHtcbiAgICBzdGF0ZSQyLm9wZW4gPSBmYWxzZTtcbiAgfVxufTtcblxudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fcHJvcElzRW51bSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19zcHJlYWRWYWx1ZXMgPSAoYSwgYikgPT4ge1xuICBmb3IgKHZhciBwcm9wIGluIGIgfHwgKGIgPSB7fSkpXG4gICAgaWYgKF9faGFzT3duUHJvcC5jYWxsKGIsIHByb3ApKVxuICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICBpZiAoX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoYikpIHtcbiAgICAgIGlmIChfX3Byb3BJc0VudW0uY2FsbChiLCBwcm9wKSlcbiAgICAgICAgX19kZWZOb3JtYWxQcm9wKGEsIHByb3AsIGJbcHJvcF0pO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59O1xuZnVuY3Rpb24gaXNEYXJrTW9kZSgpIHtcbiAgcmV0dXJuIHR5cGVvZiBtYXRjaE1lZGlhICE9PSBcInVuZGVmaW5lZFwiICYmIG1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLm1hdGNoZXM7XG59XG5jb25zdCBzdGF0ZSQxID0gcHJveHkoe1xuICB0aGVtZU1vZGU6IGlzRGFya01vZGUoKSA/IFwiZGFya1wiIDogXCJsaWdodFwiXG59KTtcbmNvbnN0IFRoZW1lQ3RybCA9IHtcbiAgc3RhdGU6IHN0YXRlJDEsXG4gIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgIHJldHVybiBzdWJzY3JpYmUoc3RhdGUkMSwgKCkgPT4gY2FsbGJhY2soc3RhdGUkMSkpO1xuICB9LFxuICBzZXRUaGVtZUNvbmZpZyh0aGVtZSkge1xuICAgIGNvbnN0IHsgdGhlbWVNb2RlLCB0aGVtZVZhcmlhYmxlcyB9ID0gdGhlbWU7XG4gICAgaWYgKHRoZW1lTW9kZSkge1xuICAgICAgc3RhdGUkMS50aGVtZU1vZGUgPSB0aGVtZU1vZGU7XG4gICAgfVxuICAgIGlmICh0aGVtZVZhcmlhYmxlcykge1xuICAgICAgc3RhdGUkMS50aGVtZVZhcmlhYmxlcyA9IF9fc3ByZWFkVmFsdWVzKHt9LCB0aGVtZVZhcmlhYmxlcyk7XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBzdGF0ZSA9IHByb3h5KHtcbiAgb3BlbjogZmFsc2UsXG4gIG1lc3NhZ2U6IFwiXCIsXG4gIHZhcmlhbnQ6IFwic3VjY2Vzc1wiXG59KTtcbmNvbnN0IFRvYXN0Q3RybCA9IHtcbiAgc3RhdGUsXG4gIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgIHJldHVybiBzdWJzY3JpYmUoc3RhdGUsICgpID0+IGNhbGxiYWNrKHN0YXRlKSk7XG4gIH0sXG4gIG9wZW5Ub2FzdChtZXNzYWdlLCB2YXJpYW50KSB7XG4gICAgc3RhdGUub3BlbiA9IHRydWU7XG4gICAgc3RhdGUubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgc3RhdGUudmFyaWFudCA9IHZhcmlhbnQ7XG4gIH0sXG4gIGNsb3NlVG9hc3QoKSB7XG4gICAgc3RhdGUub3BlbiA9IGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgeyBDb25maWdDdHJsLCBDb3JlVXRpbCwgRXZlbnRzQ3RybCwgRXhwbG9yZXJDdHJsLCBNb2RhbEN0cmwsIE9wdGlvbnNDdHJsLCBSb3V0ZXJDdHJsLCBUaGVtZUN0cmwsIFRvYXN0Q3RybCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@walletconnect/modal-core/dist/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@walletconnect/modal/dist/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@walletconnect/modal/dist/index.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WalletConnectModal: function() { return /* binding */ WalletConnectModal; }\n/* harmony export */ });\n/* harmony import */ var _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/modal-core */ \"(app-pages-browser)/./node_modules/@walletconnect/modal-core/dist/index.js\");\n\n\nclass WalletConnectModal {\n  constructor(config) {\n    this.openModal = _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__.ModalCtrl.open;\n    this.closeModal = _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__.ModalCtrl.close;\n    this.subscribeModal = _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__.ModalCtrl.subscribe;\n    this.setTheme = _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__.ThemeCtrl.setThemeConfig;\n    _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__.ThemeCtrl.setThemeConfig(config);\n    _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__.ConfigCtrl.setConfig(config);\n    this.initUi();\n  }\n  async initUi() {\n    if (typeof window !== \"undefined\") {\n      await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_walletconnect_modal-ui_dist_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! @walletconnect/modal-ui */ \"(app-pages-browser)/./node_modules/@walletconnect/modal-ui/dist/index.js\"));\n      const modal = document.createElement(\"wcm-modal\");\n      document.body.insertAdjacentElement(\"beforeend\", modal);\n      _walletconnect_modal_core__WEBPACK_IMPORTED_MODULE_0__.OptionsCtrl.setIsUiLoaded(true);\n    }\n  }\n}\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9tb2RhbC9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBGOztBQUUxRjtBQUNBO0FBQ0EscUJBQXFCLGdFQUFTO0FBQzlCLHNCQUFzQixnRUFBUztBQUMvQiwwQkFBMEIsZ0VBQVM7QUFDbkMsb0JBQW9CLGdFQUFTO0FBQzdCLElBQUksZ0VBQVM7QUFDYixJQUFJLGlFQUFVO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDRRQUFpQztBQUM3QztBQUNBO0FBQ0EsTUFBTSxrRUFBVztBQUNqQjtBQUNBO0FBQ0E7O0FBRThCO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9tb2RhbC9kaXN0L2luZGV4LmpzP2U3YjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kYWxDdHJsLCBUaGVtZUN0cmwsIENvbmZpZ0N0cmwsIE9wdGlvbnNDdHJsIH0gZnJvbSAnQHdhbGxldGNvbm5lY3QvbW9kYWwtY29yZSc7XG5cbmNsYXNzIFdhbGxldENvbm5lY3RNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMub3Blbk1vZGFsID0gTW9kYWxDdHJsLm9wZW47XG4gICAgdGhpcy5jbG9zZU1vZGFsID0gTW9kYWxDdHJsLmNsb3NlO1xuICAgIHRoaXMuc3Vic2NyaWJlTW9kYWwgPSBNb2RhbEN0cmwuc3Vic2NyaWJlO1xuICAgIHRoaXMuc2V0VGhlbWUgPSBUaGVtZUN0cmwuc2V0VGhlbWVDb25maWc7XG4gICAgVGhlbWVDdHJsLnNldFRoZW1lQ29uZmlnKGNvbmZpZyk7XG4gICAgQ29uZmlnQ3RybC5zZXRDb25maWcoY29uZmlnKTtcbiAgICB0aGlzLmluaXRVaSgpO1xuICB9XG4gIGFzeW5jIGluaXRVaSgpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgYXdhaXQgaW1wb3J0KCdAd2FsbGV0Y29ubmVjdC9tb2RhbC11aScpO1xuICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwid2NtLW1vZGFsXCIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgbW9kYWwpO1xuICAgICAgT3B0aW9uc0N0cmwuc2V0SXNVaUxvYWRlZCh0cnVlKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgV2FsbGV0Q29ubmVjdE1vZGFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@walletconnect/modal/dist/index.js\n"));

/***/ })

}]);